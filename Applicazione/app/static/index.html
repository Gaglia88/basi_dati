<!doctype html>
<html lang="it">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="static/js/bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="static/js/jquery-3.6.0.min.js"></script>
    <!-- main code -->
    <script src="static/js/script.js"></script>
    <!-- custom css -->
    <link href="static/dashboard.css" rel="stylesheet">
    <title>Gestione ticket</title>
</head>
<body>

<div id="logged">
	<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
		<a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">Gestione ticket</a>
		<button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse"
				data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false"
				aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="navbar-nav">
			<div class="nav-item text-nowrap">
				<a class="nav-link px-3" href="#" onclick="logout()">Logout</a>
			</div>
		</div>
	</header>

	<div class="container-fluid">
		<div class="row">
			<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
				<div class="position-sticky pt-3">
					<ul class="nav flex-column">
						<li class="nav-item" style="visibility:hidden;" id="nav_ticket">
							<a class="nav-link" href="javascript:navigate('static/pages/ticket.html')">
								<span data-feather="message-square"></span>
								Ticket
							</a>
						</li>
						<li class="nav-item" style="visibility:hidden;" id="nav_utenti">
							<a class="nav-link" href="javascript:navigate('static/pages/utenti.html')">
								<span data-feather="users"></span>
								Utenti
							</a>
						</li>
						<li class="nav-item" style="visibility:hidden;" id="nav_categorie">
							<a class="nav-link" href="javascript:navigate('static/pages/categorie.html')">
								<span data-feather="folder"></span>
								Categorie
							</a>
						</li>
					</ul>
				</div>
			</nav>

			<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
				<div id="content" style="margin: 10px"></div>
			</main>
		</div>
	</div>
</div>

<div id="login" style="visibility:hidden; text-align:center;">
	<form class="form-signin">
		<h1 class="h3 mb-3 fw-normal">Eseguire l'accesso</h1>
		<div class="form-floating">
			<input type="email" class="form-control" id="email" placeholder="name@example.com">
			<label for="email">Email</label>
		</div>
		<div class="form-floating">
			<input type="password" class="form-control" id="password" placeholder="Password">
			<label for="password">Password</label>
		</div>
		<button class="w-100 btn btn-lg btn-primary" type="button" onclick="login()">Login</button>
	</form>
</div>

<script src="static/js/feather.min.js"></script>
<script src="static/js/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js"></script>
<script>
    $(document).ready(function () {
		if ('logged' in sessionStorage && sessionStorage['logged'] == "true"){
			ruolo = sessionStorage.getItem('role');
			if(ruolo=='amministratore'){
				$("#nav_utenti").css("visibility", "visible");
				$("#nav_categorie").css("visibility", "visible");
				$("#nav_ticket").css("visibility", "hidden");
				navigate('static/pages/utenti.html');
			}
			else{
				$("#nav_ticket").css("visibility", "visible");
				navigate('static/pages/ticket.html');
			}
		}
		else{
			$("#logged").css("visibility", "hidden");
			$("#login").css("visibility", "visible");
		}
    });
</script>
</body>
</html>
